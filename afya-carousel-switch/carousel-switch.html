<!-- /**
* Lullaby by Marcin Chuć
* e-mail: marcin ...change it to at... afya.pl
* (C) 2019
*/ -->
<script type="text/javascript">
  Math.seed = Date.now();
  RED.nodes.registerType('afya-carousel-switch', {
    category: 'function',
    color: '#5EFD00',
    paletteLabel: 'carousel switch',
    defaults: {
      name: {
        value: ""
      },

      variableName: {
        value: -1,
        required: true,
      },
      maxValue: {
        value: 2,
        required: true,
        validate: RED.validators.number()
      },

    },
    inputs: 1,
    outputs: 1,
    icon: "electric-switch.png",
    label: function() {
      return this.name || "carousel (0  - " + this.maxValue + ")";
    },
    oneditprepare: function() {
      if ($("#node-input-variableName").val() == -1) {
        $("#node-input-variableName").val("AFYA_" + Math.random().toString(36).substr(2, 5) + Date.now().toString().substr(-7));
      }
    }
  });

</script>

<script type="text/x-red" data-template-name="afya-carousel-switch">
  <div class="form-row">
         <label for="node-input-name"><i class="icon-tag"></i> Name</label>
         <input type="text" id="node-input-name" placeholder="Name">
   </div>
   <div class="form-row">
            <label for="node-input-variableName"><i class="icon-bookmark"></i> Variable name</label>
            <input type="text" id="node-input-variableName" placeholder="Your_Unique_Variable_Name">
        </div>
  <div class="form-row">
            <label for="node-input-maxValue"><i class="icon-bookmark"></i> Maximum value</label>
            <input type="text" id="node-input-maxValue" placeholder="more than 0, positive value">
  </div>

 </script>

<script type="text/x-red" data-help-name="afya-carousel-switch">
  <p><b>EN</b></p><hr>
<p>After activation, it increases the value by one, after reaching the maximum value - goes back to zero ... unless as<br>
Reverse carousel order:
<code>
msg.payload.rev = "yes"
</code><br>

  Carousel reset - forward direction will always show 0 and reverse direction maxValue
  <code>
  msg.payload.reset = "yes"
  </code><br>
  Noop: no operation (used only for reset, no operation - i.e. lighting up)
  <code>
  msg.payload.noop = "yes"
  </code><br>


I created this node for repetitive scenes. Maybe someone will be useful in another purpose :)</p>
<p><b>PL</b></p><hr>
<p>
Po aktywacji zwiększa wartość o jeden, a po osiągnięciu wartości maksymalnej - wraca do zera... chyba, że jako<br>
Odwrócenie kolejności karuzeli:
<code>
msg.payload.rev = "yes"
</code><br>

Reset karuzeli - kierunek do przodu zawsze wskaże 0, a kierunek do tyłu maxValue
  <code>
  msg.payload.reset = "yes"
  </code><br>
  Noop: brak operacji (wykorzystane tylko dla resetu, bez wykonywania operacji - czyli np. zapalania światła)
  <code>
  msg.payload.noop = "yes"
  </code><br>

Utworzyłem ten węzeł z myślą o powtarzających się scenach. Może komuś przyda się jeszcze w innym celu :)
</p>
</script>
